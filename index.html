<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TrellonPay â€” Admin Dashboard</title>
  <script src="https://unpkg.com/feather-icons"></script>
  <link rel="stylesheet" href="styles.css">
  <script type="module" src="admin.js"></script>
</head>
<body>

  <header class="app-header">
    <div class="left">
      <button id="btnOpen" class="icon-btn" title="Menu">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
      <img src="logo.png" class="the_logo">
    </div>

    <div class="right">
      <div class="profile">
        <div class="avatar">
          <svg width="38" height="38" viewBox="0 0 24 24" fill="#e6eef6"><circle cx="12" cy="8" r="3"/><path d="M4 20c0-3.314 3.582-6 8-6s8 2.686 8 6"/></svg>
        </div>
        <div>
          <div style="font-weight:600; font-size:14px">Admin</div>
          <div class="muted" style="font-size:12px"><span id="userEmail"></span></div>
        </div>
      </div>
    </div>
  </header>

  <div id="overlay" class="overlay"></div>

  <div class="app-layout">
    <aside id="sidebar" class="sidebar">
      <div class="brand">
        <div class="logo">
          <img src="favicon.png" style="width: 30px;">
        </div>
        <div>
          <div style="font-weight:700">TrellonPay</div>
          <div class="muted" style="font-size:12px">Admin panel</div>
        </div>
      </div>
      <nav class="nav">
        <button class="active" data-target="overview">ğŸ  Overview</button>
        <button data-target="users">ğŸ‘¥ Users</button>
        <button data-target="withdrawals">ğŸ’¸ Withdrawals</button>
        <button data-target="leaderboard">ğŸ† Leaderboard</button>
        <button data-target="settings">âš™ï¸ Settings</button>
      </nav>
    </aside>

    <main id="main" class="app-main">
      <div class="container">

        <!-- OVERVIEW -->
        <section id="overview" class="tab-pane active">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:12px">
            <div>
              <h2 style="margin:0 0 6px 0">ğŸ  Overview</h2>
              <div class="muted">Platform summary</div>
            </div>
          </div>

          <div class="cards">
            <div class="card">
              <small>Registered Users</small>
              <h3 id="totalUsers"></h3>
            </div>
            <div class="card">
              <small>Daily Active Users</small>
              <h3 id="dailyActiveUsers"></h3>
            </div>
            <div class="card">
              <small>Pending Withdrawals</small>
              <h3 id="pendingWithdrawals"></h3>
            </div>
            <!--<div class="card">
              <small>Completed Withdrawals</small>
              <h3 id="completedWithdrawals"></h3>
            </div>-->
            <div class="card">
              <small>Total Points Shared</small>
              <h3 id="totalPoints"></h3>
            </div>
            <div class="card">
              <small>Total Points Shared (This Week)</small>
              <h3 id="weeklyPoints"></h3>
            </div>
            <div class="card">
              <small>Total Points Shared (This Month)</small>
              <h3 id="monthlyPoints"></h3>
            </div>
            
            
                
                <button class="btn" id="refreshBtn" style="padding: 10px;">Refresh Dashboard</button>
            </div>
          </div>
        </section>

        <!-- USERS -->
        <section id="users" class="tab-pane">
          <h2>ğŸ‘¥ Users & Information</h2>
          <div class="table-wrapper">
            <table id="usersTableBody">
            </table>
          </div>
        </section>

        <!-- WITHDRAWALS -->
        <section id="withdrawals" class="tab-pane">
          <h2>ğŸ’¸ Withdrawal Requests</h2>
          <div class="table-wrapper">
            <table id="withdrawalsTableBody"></table>
          </div>
        </section>

        <!-- LEADERBOARD -->
        <section id="leaderboard" class="tab-pane">
          <h2>ğŸ† Leaderboard</h2>
          <div class="leaderboard">
            <li id="leaderboard"></li>
          </div>
        </section>

        <!-- SETTINGS -->
        <section id="settings" class="tab-pane">
          <h2>âš™ï¸ Settings</h2>
          <div class="card" style="margin-bottom: 10px;"><p class="muted">Admin configuration options will appear here.</p></div>
          <div class="card">
            <p class="muted">Logout</p>
           </div>
        </section>

      </div>
    </main>
  </div>

  <script>
    if (window.feather) feather.replace();

    const btnOpen = document.getElementById('btnOpen');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const navButtons = sidebar.querySelectorAll('nav button');
    const panes = document.querySelectorAll('section.tab-pane');
    function showPane(id){
      panes.forEach(p => p.classList.toggle('active', p.id === id));
      navButtons.forEach(b => b.classList.toggle('active', b.dataset.target === id));
    }

    function openSidebar(){ sidebar.classList.add('show'); overlay.classList.add('show'); }
    function closeSidebar(){ sidebar.classList.remove('show'); overlay.classList.remove('show'); }

    btnOpen.addEventListener('click', () => sidebar.classList.contains('show') ? closeSidebar() : openSidebar());
    overlay.addEventListener('click', closeSidebar);

    navButtons.forEach(btn => btn.addEventListener('click', () => {
      showPane(btn.dataset.target);
      if (window.innerWidth < 992) closeSidebar();
    }));
  </script>
</body>
</html>